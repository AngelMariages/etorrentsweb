(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{App:()=>M,Error:()=>w,Root:()=>O,createAppState:()=>i,createStoreRegistry:()=>j});const r=React;var n=e.n(r);const o=Redux,a=ReactRouterDOM,s=wp.i18n,c={handle:"",label:"",render:()=>null,icon:()=>null,isEnabled:!0},i=(e=c)=>({reducers:{apps:(t={},r)=>{switch(r.type){case"REGISTER_APP":return{[r.handle]:{...e,handle:r.handle,...r.config},...t};case"UNREGISTER_APP":return delete t[r.handle],{...t};case"UPDATE_APP":return{...t[r.handle],...r.state,...t};default:return t}}},actions:{registerApp:(e="",t={})=>({type:"REGISTER_APP",handle:e,config:t}),unregisterApp:(e="")=>({type:"UNREGISTER_APP",handle:e}),updateApp:(e="",t={})=>({type:"UPDATE_APP",state:t})}});var u,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e.g?e.g:"undefined"!=typeof self?self:{},f=(function(e,t){var r="__lodash_hash_undefined__",n=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",c="[object Date]",i="[object Error]",u="[object Function]",f="[object Map]",p="[object Number]",h="[object Object]",d="[object Promise]",y="[object RegExp]",_="[object Set]",g="[object String]",b="[object WeakMap]",v="[object ArrayBuffer]",m="[object DataView]",j=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,w={};w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w[o]=w[a]=w[v]=w[s]=w[m]=w[c]=w[i]=w[u]=w[f]=w[p]=w[h]=w[y]=w[_]=w[g]=w[b]=!1;var A="object"==typeof l&&l&&l.Object===Object&&l,S="object"==typeof self&&self&&self.Object===Object&&self,O=A||S||Function("return this")(),P=t&&!t.nodeType&&t,C=P&&e&&!e.nodeType&&e,R=C&&C.exports===P,z=R&&A.process,x=function(){try{return z&&z.binding&&z.binding("util")}catch(e){}}(),T=x&&x.isTypedArray;function U(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function L(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function k(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var F,M,B,I=Array.prototype,D=Function.prototype,N=Object.prototype,$=O["__core-js_shared__"],G=D.toString,H=N.hasOwnProperty,V=(F=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"",J=N.toString,W=RegExp("^"+G.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=R?O.Buffer:void 0,Z=O.Symbol,q=O.Uint8Array,K=N.propertyIsEnumerable,Q=I.splice,Y=Z?Z.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=X?X.isBuffer:void 0,re=(M=Object.keys,B=Object,function(e){return M(B(e))}),ne=Ce(O,"DataView"),oe=Ce(O,"Map"),ae=Ce(O,"Promise"),se=Ce(O,"Set"),ce=Ce(O,"WeakMap"),ie=Ce(Object,"create"),ue=Te(ne),le=Te(oe),fe=Te(ae),pe=Te(se),he=Te(ce),de=Z?Z.prototype:void 0,ye=de?de.valueOf:void 0;function _e(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ge(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function be(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ve(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new be;++t<r;)this.add(e[t])}function me(e){var t=this.__data__=new ge(e);this.size=t.size}function je(e,t){for(var r=e.length;r--;)if(Ue(e[r][0],t))return r;return-1}function Ee(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Y&&Y in Object(e)?function(e){var t=H.call(e,Y),r=e[Y];try{e[Y]=void 0;var n=!0}catch(e){}var o=J.call(e);return n&&(t?e[Y]=r:delete e[Y]),o}(e):function(e){return J.call(e)}(e)}function we(e){return De(e)&&Ee(e)==o}function Ae(e,t,r,n,u){return e===t||(null==e||null==t||!De(e)&&!De(t)?e!=e&&t!=t:function(e,t,r,n,u,l){var d=ke(e),b=ke(t),j=d?a:ze(e),E=b?a:ze(t),w=(j=j==o?h:j)==h,A=(E=E==o?h:E)==h,S=j==E;if(S&&Fe(e)){if(!Fe(t))return!1;d=!0,w=!1}if(S&&!w)return l||(l=new me),d||Ne(e)?Se(e,t,r,n,u,l):function(e,t,r,n,o,a,u){switch(r){case m:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case v:return!(e.byteLength!=t.byteLength||!a(new q(e),new q(t)));case s:case c:case p:return Ue(+e,+t);case i:return e.name==t.name&&e.message==t.message;case y:case g:return e==t+"";case f:var l=L;case _:var h=1&n;if(l||(l=k),e.size!=t.size&&!h)return!1;var d=u.get(e);if(d)return d==t;n|=2,u.set(e,t);var b=Se(l(e),l(t),n,o,a,u);return u.delete(e),b;case"[object Symbol]":if(ye)return ye.call(e)==ye.call(t)}return!1}(e,t,j,r,n,u,l);if(!(1&r)){var O=w&&H.call(e,"__wrapped__"),P=A&&H.call(t,"__wrapped__");if(O||P){var C=O?e.value():e,R=P?t.value():t;return l||(l=new me),u(C,R,r,n,l)}}return!!S&&(l||(l=new me),function(e,t,r,n,o,a){var s=1&r,c=Oe(e),i=c.length;if(i!=Oe(t).length&&!s)return!1;for(var u=i;u--;){var l=c[u];if(!(s?l in t:H.call(t,l)))return!1}var f=a.get(e);if(f&&a.get(t))return f==t;var p=!0;a.set(e,t),a.set(t,e);for(var h=s;++u<i;){var d=e[l=c[u]],y=t[l];if(n)var _=s?n(y,d,l,t,e,a):n(d,y,l,e,t,a);if(!(void 0===_?d===y||o(d,y,r,n,a):_)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var g=e.constructor,b=t.constructor;g==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(e),a.delete(t),p}(e,t,r,n,u,l))}(e,t,r,n,Ae,u))}function Se(e,t,r,n,o,a){var s=1&r,c=e.length,i=t.length;if(c!=i&&!(s&&i>c))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var l=-1,f=!0,p=2&r?new ve:void 0;for(a.set(e,t),a.set(t,e);++l<c;){var h=e[l],d=t[l];if(n)var y=s?n(d,h,l,t,e,a):n(h,d,l,e,t,a);if(void 0!==y){if(y)continue;f=!1;break}if(p){if(!U(t,(function(e,t){if(s=t,!p.has(s)&&(h===e||o(h,e,r,n,a)))return p.push(t);var s}))){f=!1;break}}else if(h!==d&&!o(h,d,r,n,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function Oe(e){return function(e,t,r){var n=t(e);return ke(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,$e,Re)}function Pe(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Ce(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ie(e)||function(e){return!!V&&V in e}(e))&&(Me(e)?W:j).test(Te(e))}(r)?r:void 0}_e.prototype.clear=function(){this.__data__=ie?ie(null):{},this.size=0},_e.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_e.prototype.get=function(e){var t=this.__data__;if(ie){var n=t[e];return n===r?void 0:n}return H.call(t,e)?t[e]:void 0},_e.prototype.has=function(e){var t=this.__data__;return ie?void 0!==t[e]:H.call(t,e)},_e.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ie&&void 0===t?r:t,this},ge.prototype.clear=function(){this.__data__=[],this.size=0},ge.prototype.delete=function(e){var t=this.__data__,r=je(t,e);return!(r<0||(r==t.length-1?t.pop():Q.call(t,r,1),--this.size,0))},ge.prototype.get=function(e){var t=this.__data__,r=je(t,e);return r<0?void 0:t[r][1]},ge.prototype.has=function(e){return je(this.__data__,e)>-1},ge.prototype.set=function(e,t){var r=this.__data__,n=je(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},be.prototype.clear=function(){this.size=0,this.__data__={hash:new _e,map:new(oe||ge),string:new _e}},be.prototype.delete=function(e){var t=Pe(this,e).delete(e);return this.size-=t?1:0,t},be.prototype.get=function(e){return Pe(this,e).get(e)},be.prototype.has=function(e){return Pe(this,e).has(e)},be.prototype.set=function(e,t){var r=Pe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ve.prototype.add=ve.prototype.push=function(e){return this.__data__.set(e,r),this},ve.prototype.has=function(e){return this.__data__.has(e)},me.prototype.clear=function(){this.__data__=new ge,this.size=0},me.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},me.prototype.get=function(e){return this.__data__.get(e)},me.prototype.has=function(e){return this.__data__.has(e)},me.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ge){var n=r.__data__;if(!oe||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new be(n)}return r.set(e,t),this.size=r.size,this};var Re=ee?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var s=e[r];t(s)&&(a[o++]=s)}return a}(ee(e),(function(t){return K.call(e,t)})))}:function(){return[]},ze=Ee;function xe(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||E.test(e))&&e>-1&&e%1==0&&e<t}function Te(e){if(null!=e){try{return G.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ue(e,t){return e===t||e!=e&&t!=t}(ne&&ze(new ne(new ArrayBuffer(1)))!=m||oe&&ze(new oe)!=f||ae&&ze(ae.resolve())!=d||se&&ze(new se)!=_||ce&&ze(new ce)!=b)&&(ze=function(e){var t=Ee(e),r=t==h?e.constructor:void 0,n=r?Te(r):"";if(n)switch(n){case ue:return m;case le:return f;case fe:return d;case pe:return _;case he:return b}return t});var Le=we(function(){return arguments}())?we:function(e){return De(e)&&H.call(e,"callee")&&!K.call(e,"callee")},ke=Array.isArray,Fe=te||function(){return!1};function Me(e){if(!Ie(e))return!1;var t=Ee(e);return t==u||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function Ie(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function De(e){return null!=e&&"object"==typeof e}var Ne=T?function(e){return function(t){return e(t)}}(T):function(e){return De(e)&&Be(e.length)&&!!w[Ee(e)]};function $e(e){return null!=(t=e)&&Be(t.length)&&!Me(t)?function(e,t){var r=ke(e),n=!r&&Le(e),o=!r&&!n&&Fe(e),a=!r&&!n&&!o&&Ne(e),s=r||n||o||a,c=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],i=c.length;for(var u in e)!t&&!H.call(e,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xe(u,i))||c.push(u);return c}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||N))return re(e);var t,r,n=[];for(var o in Object(e))H.call(e,o)&&"constructor"!=o&&n.push(o);return n}(e);var t}e.exports=function(e,t){return Ae(e,t)}}(u={exports:{}},u.exports),u.exports);const p=(e,t,r)=>"boolean"==typeof e?e:"function"==typeof e?e(t,r):"string"==typeof e?!f(t[e],r[e]):!!Array.isArray(e)&&e.some((e=>!f(t[e],r[e]))),h=(e,t)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=(e=>{let t=!1,r=!1,n=!1;for(let o=0;o<e.length;o++){const a=e[o];t&&/[a-zA-Z]/.test(a)&&a.toUpperCase()===a?(e=e.slice(0,o)+"-"+e.slice(o),t=!1,n=r,r=!0,o++):r&&n&&/[a-zA-Z]/.test(a)&&a.toLowerCase()===a?(e=e.slice(0,o-1)+"-"+e.slice(o-1),n=r,r=!1,t=!0):(t=a.toLowerCase()===a&&a.toUpperCase()!==a,n=r,r=a.toUpperCase()===a&&a.toLowerCase()!==a)}return e})(e)),r=e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,((e,t)=>t.toUpperCase())).replace(/\d+(\w|$)/g,(e=>e.toUpperCase())),t.pascalCase?r.charAt(0).toUpperCase()+r.slice(1):r);var r};var d=h,y=h;d.default=y;const _=(e,t,r)=>(Object.entries(r).map((([r])=>{if(!t[r]){const t="SET_".concat(r.toUpperCase()),n=d("set_".concat(r));e[n]=e=>({type:t,value:e})}})),e),g=(e,t)=>Object.keys(e).length||Object.keys(t).length?(Object.entries(t).map((([t,r])=>{e[t]||(e[t]=(e=r,n)=>{switch(n.type){case"SET_".concat(t.toUpperCase()):return n.value;default:return e}})})),(0,o.combineReducers)(e)):e=>e,b=(e,t)=>{const r=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;return(r?r({name:e}):o.compose)((0,o.applyMiddleware)(v(t)))},v=e=>{const{before:t,after:r}=e;return e=>n=>o=>{t&&t[o.type]&&t[o.type](o,e);const a=n(o);return r&&r[o.type]&&r[o.type](o,e),a}},m=e=>e.charAt(0).toUpperCase()+e.slice(1),j=()=>{const e={};return{registerStore:(t,{state:r={},cache:n=[],actions:a={},reducers:s={},selectors:c={},effects:i={}})=>{if(!t)throw new Error("Missing key required for registerStore.");if(e[t])throw new Error("A store with the key '".concat(t,"' already exists."));const u=((e,t)=>{const r=localStorage.getItem(e);if(r){const e=JSON.parse(r);return{...t,...e}}return t})(t,r);var l,f,p;e[t]={actions:_(a,s,u),store:(0,o.createStore)(g(s,u),u,b(t,i))},e[t].selectors=((e,t)=>{const r={},n=t.getState();return Object.entries(n).map((([t])=>{const r=d("get_".concat(t));e[r]||(e[r]=e=>e[t])})),Object.entries(e).map((([e,n])=>{r[e]=(...e)=>n(t.getState(),...e)})),r})(c,e[t].store),l=t,f=e[t].store,(p=n).length&&f.subscribe((()=>{const e=f.getState(),t={};p.map((r=>{t[r]=e[r]})),localStorage.setItem(l,JSON.stringify(t))}))},useStore:(t,n=!0)=>{const{store:o}=e[t],a=o.getState(),s=(0,r.useRef)(a),[c,i]=(0,r.useState)(a);return(0,r.useEffect)((()=>(i(o.getState()),o.subscribe((()=>{const e=o.getState();p(n,s.current,e)&&i({...e}),s.current=e})))),[]),c},getStore:t=>e[t].store,getDispatch:t=>{const{actions:r,store:n}=e[t];return(0,o.bindActionCreators)(r,n.dispatch)},getSelectors:t=>e[t].selectors,getHooks:t=>{const{actions:n,store:a}=e[t];return((e,t)=>{const n=e.getState(),o={};return Object.keys(n).map((n=>{const a="use".concat(m(n));o[a]=(o=!0)=>{const[a,s]=(0,r.useState)(e.getState()[n]),c=(0,r.useRef)(e.getState()[n]);(0,r.useLayoutEffect)((()=>(s(e.getState()[n]),c.current=e.getState()[n],e.subscribe((()=>{const t=e.getState();p(o,a,c.current)&&s(t[n]),c.current=t[n]})))),[]);const i="set".concat(m(n));let u=t[i];return[a,u]}})),o})(a,(0,o.bindActionCreators)(n,a.dispatch))}}};function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const w={},A=({error:e,title:t=(0,s.__)("There seems to be an error"),children:r,style:o={},...a})=>{const c={...o,display:"flex",flexDirection:"column",flex:"1 1 auto",justifyContent:"center",alignItems:"center",padding:40,textAlign:"center",minHeight:0,maxHeight:"100%"};return n().createElement("div",E({style:c},a),n().createElement("h1",{style:{marginBottom:20}},t),n().createElement("code",{style:{padding:10}},e.message),r)};w.Boundary=class extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){const{alternate:e=A,children:t}=this.props,{hasError:n,error:o}=this.state;return n?(0,r.createElement)(e,{error:o}):t}},w.Boundary.displayName="Error.Boundary",w.Page=A,w.Page.displayName="Error.Page";const S=()=>n().createElement("div",null,"Loading..."),O=({children:e,error:t,loading:o=S,router:s=a.MemoryRouter,routerProps:c={}})=>n().createElement(w.Boundary,{alternate:t},n().createElement(s,c,n().createElement(r.Suspense,{fallback:n().createElement(o,null)},e))),P={handle:null,label:null,isAppRoot:!1},C=(0,r.createContext)(P),R=()=>(0,r.useContext)(C),z=e=>n().createElement(w.Page,E({title:(0,s.__)("App Core: There seems to be an issue rendering current app.")},e)),x=({loading:e,error:t=k,apps:o})=>{const s=(0,a.useLocation)(),{app:c}=(0,a.useParams)();if((0,r.useEffect)((()=>{if(o[c]&&"function"==typeof o[c].onMount)return o[c].onMount()}),[c]),!o[c])return n().createElement(e,null);const{label:i="",root:u=(()=>{}),onMount:l=(()=>{})}=o[c],f=2>=s.pathname.split("/").length,p={...P,handle:c,baseURL:"/".concat(c),label:i,isAppRoot:f};return n().createElement(C.Provider,{value:p},n().createElement(w.Boundary,{alternate:k},n().createElement(r.Suspense,{fallback:n().createElement(e,null)},n().createElement(T,E({root:u},p)))))},T=(0,r.memo)((({root:e,...t})=>e?n().createElement(e,t):n().createElement(L,null))),U=()=>null,L=()=>n().createElement(F,null,n().createElement("h1",null,(0,s.__)("App Not Found"))),k=e=>{const{label:t}=R();return n().createElement(w.Page,E({title:(0,s.sprintf)("There seems to be an issue with the %s app.",t)},e))},F=({children:e})=>n().createElement("div",{style:{flex:"1 1 auto",minHeight:0,maxHeight:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},e),M={};M.use=R,M.Content=({apps:e={},defaultApp:t="home",notFound:r=L,loading:o=U})=>n().createElement(w.Boundary,{alternate:z},n().createElement(a.Switch,null,n().createElement(a.Route,{exact:!0,path:"/"},n().createElement(a.Redirect,{to:"/".concat(t)})),n().createElement(a.Route,{path:"/:app",render:()=>n().createElement(x,{loading:o,apps:e})}),n().createElement(a.Route,{component:r}))),window.FL=window.FL||{},FL.vendors=FL.vendors||{},FL.vendors.BBAppCore=t})();