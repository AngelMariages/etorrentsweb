function modulaInViewport(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var i=t.getBoundingClientRect();return i.top-jQuery(window).height()<=-100&&i.top-jQuery(window).height()>=-400||i.bottom<=jQuery(window).height()}jQuery(document).on("vc-full-width-row-single vc-full-width-row",(function(t,i){jQuery("body").find(".modula").length>0&&jQuery(window).trigger("modula-update")})),jQuery(window).on("elementor/frontend/init",(function(){window.elementorFrontend&&window.elementorFrontend.hooks.addAction("frontend/element_ready/global",(function(t){jQuery("body").find(".modula").length}))})),function(t,i,e,o){var n="modulaGallery",s={resizer:"/",keepArea:!0,type:"creative-gallery",columns:12,height:800,desktopHeight:800,mobileHeight:800,tabletHeight:800,gutter:10,desktopGutter:10,mobileGutter:10,tabletGutter:10,enableTwitter:!1,enableFacebook:!1,enableWhatsapp:!1,enablePinterest:!1,enableLinkedin:!1,enableEmail:!1,lazyLoad:0,initLightbox:!1,lightbox:"fancybox",lightboxOpts:{},inView:!1};function a(i,e){this.element=i,this.$element=t(i),this.$itemsCnt=this.$element.find(".modula-items"),this.$items=this.$itemsCnt.find(".modula-item"),this.options=t.extend({},s,e),this._defaults=s,this._name=n,this.tiles=[],this.$tilesCnt=null,this.completed=!1,this.lastWidth=0,this.resizeTO=0,this.isIsotope=!1,this.isLazyLoaded=!0,this.init()}a.prototype.init=function(){var o=this,n=e.documentElement.clientWidth;this.options.gutter=n<=568?this.options.mobileGutter:n<=768?this.options.tabletGutter:this.options.desktopGutter,t(e).trigger("modula_api_before_init",[o]),"custom-grid"===this.options.type?this.createCustomGallery():"creative-gallery"==this.options.type?this.createGrid():"grid"==this.options.type&&("automatic"==this.options.grid_type?this.createAutoGrid():this.createColumnsGrid()),"custom-grid"===this.options.type&&t(i).height()<t("html").height()&&o.onResize(o),t(i).resize((function(){o.onResize(o)}));new ResizeObserver((t=>{o.onResize(o)})).observe(o.$element[0]),t(i).on("modula-update",(function(){o.onResize(o)})),t(e).on("lazyloaded",(function(i){var e,n,s=t(i.target);"modula"==s.data("source")&&(s.data("size",{width:s.width(),height:s.height()}),(e=s.parents(".modula-item")).addClass("tg-loaded"),n=o.$items.not(".jtg-hidden").index(e),o.placeImage(n),o.isIsotope&&void 0!==o.$itemsCnt.data("modulaisotope")&&o.$itemsCnt.modulaisotope("layout"),"grid"==o.options.type&&"automatic"==o.options.grid_type&&o.$itemsCnt.justifiedGallery())})),o.options.inView&&jQuery(i).on("DOMContentLoaded load resize scroll",(function(){modulaInViewport(o.$element)&&o.$element.addClass("modula-loaded-scale")})),this.setupSocial(),jQuery(o.$element).addClass("modula-gallery-initialized"),this.options.onComplete&&this.options.onComplete(),"fancybox"!=o.options.lightbox||o.options.initLightbox||this.initLightbox(),t(e).trigger("modula_api_after_init",[o])},a.prototype.initLightbox=function(){var i=this;i.$element.on("click",".modula-no-follow",(function(t){t.preventDefault()})),i.$element.on("click",".modula-item-link:not( .modula-simple-link )",(function(e){e.preventDefault();var o=jQuery(this),n=t.map(i.$items,(function(t){if(jQuery(t).find(".modula-item-link:not( .modula-no-follow )").length>0){var i=jQuery(t).find(".modula-item-link:not( .modula-simple-link )"),e=jQuery(t).find(".pic");return{src:e.data("full"),opts:{$thumb:e.parents(".modula-item"),caption:i.data("caption"),alt:e.attr("alt"),image_id:i.attr("data-image-id")},current:jQuery(t).is(o.parents(".modula-item"))}}})),s=t.map(n,(function(t,i){if(t.current)return i}))[0];jQuery.modulaFancybox.open(n,i.options.lightboxOpts,s)}))},a.prototype.trunc=function(t){return Math.trunc?Math.trunc(t):(t=+t,isFinite(t)?t-t%1||(t<0?-0:0===t?t:0):t)},a.prototype.createCustomGallery=function(){var i,o=this,n=this.$element.find(".modula-items").width(),s=this,a=this.options.columns,h=e.documentElement.clientWidth;"1"==this.options.enableResponsive&&(h<=568?a=this.options.mobileColumns:h<=768&&(a=this.options.tabletColumns)),i=this.options.gutter>0?(n-this.options.gutter*(a-1))/a:Math.floor(n/a*1e3)/1e3,this.$items.not(".jtg-hidden").each((function(e,n){var h,r,l,d,u={};h=t(n).data("width"),r=t(n).data("height"),h>12&&(h=12),"1"==s.options.enableResponsive&&(l=h,d=r,1==a?r=(h=1)*d/l:((h=Math.round(a*l/12))<1&&(h=1),(r=Math.round(h*d/l))<1&&(r=1))),u.width=i*h+s.options.gutter*(h-1),u.height=Math.round(i)*r+s.options.gutter*(r-1),t(n).data("size",u).addClass("tiled").addClass(u.width>u.height?"tile-h":"tile-v").data("position"),t(n).css(t(n).data("size")),t(n).find(".figc").css({width:t(n).data("size").width,height:t(n).data("size").height}),o.loadImage(e)}));var r={itemSelector:".modula-item",layoutMode:"packery",packery:{gutter:parseInt(s.options.gutter)}};this.$itemsCnt.modulaisotope(r),this.isIsotope=!0},a.prototype.createGrid=function(){var i=this,o=e.documentElement.clientWidth;i.options.height=o<=568?i.options.mobileHeight:o<=768?i.options.tabletHeight:i.options.desktopHeight,this.$itemsCnt.data("area",this.$itemsCnt.width()*this.options.height),this.lastWidth=this.$itemsCnt.width();for(var n=0;n<this.$items.not(".jtg-hidden").length;n++)this.tiles.push(i.getSlot());if(this.tiles.sort((function(t,i){return t.position-i.position})),this.$items.not(".jtg-hidden").each((function(e,o){var n=i.tiles[e];t(o).data("size",n),t(o).addClass("tiled").addClass(n.width>n.height?"tile-h":"tile-v").data("position"),t(o).css({width:n.width,height:n.height}),t(o).find(".figc").css({width:n.width,height:n.height}),i.loadImage(e)})),!this.isIsotope){var s={resizesContainer:!1,itemSelector:".modula-item",layoutMode:"packery",packery:{gutter:parseInt(i.options.gutter)}};this.$itemsCnt.modulaisotope(s),this.isIsotope=!0}},a.prototype.createAutoGrid=function(){this.$itemsCnt.justifiedGallery({rowHeight:this.options.rowHeight,margins:this.options.gutter,lastRow:this.options.lastRow,captions:!1,border:0,imgSelector:"img.pic",cssAnimation:!0,imagesAnimationDuration:700})},a.prototype.createColumnsGrid=function(){var t=this;this.$itemsCnt.modulaisotope({itemSelector:".modula-item",layoutMode:"packery",packery:{gutter:parseInt(this.options.gutter)}}),this.$items.each((function(i,e){t.loadImage(i)})),this.isIsotope=!0},a.prototype.getSlot=function(){if(0==this.tiles.length)return e={top:0,left:0,width:this.$itemsCnt.width(),height:this.options.height,area:this.$itemsCnt.width()*this.options.height,position:0};for(var t=0,i=0;i<this.tiles.length;i++){(e=this.tiles[i]).area>this.tiles[t].area&&(t=i)}var e={},o=this.tiles[t];if(o.width>o.height){var n=o.width/2*this.options.randomFactor;o.prevWidth=o.width,o.width=Math.floor(o.width/2+n*(Math.random()-.5)),e={top:o.top,left:o.left+o.width+this.options.gutter,width:o.prevWidth-o.width-this.options.gutter,height:o.height}}else{n=o.height/2*this.options.randomFactor;o.prevHeight=o.height,o.height=Math.floor(o.height/2+n*(Math.random()-.5)),e={left:o.left,top:o.top+o.height+this.options.gutter,width:o.width,height:o.prevHeight-o.height-this.options.gutter}}return e.area=e.width*e.height,e.position=1e3*e.top+e.left,o.position=1e3*o.top+o.left,this.tiles[t]=o,this.tiles[t].area=o.width*o.height,e},a.prototype.reset=function(){var i=this;i.tiles=[],"custom-grid"===this.options.type?this.createCustomGallery():"creative-gallery"==this.options.type?this.createGrid():"grid"==this.options.type&&("automatic"==this.options.grid_type?this.createAutoGrid():this.createColumnsGrid()),i.lastWidth=i.$itemsCnt.width(),t(e).trigger("modula_api_reset",[i])},a.prototype.onResize=function(t){if(t.lastWidth!=t.$itemsCnt.width()){var i=e.documentElement.clientWidth;t.options.gutter=i<=568?t.options.mobileGutter:i<=768?t.options.tabletGutter:this.options.desktopGutter,clearTimeout(t.resizeTO),t.resizeTO=setTimeout((function(){if(t.options.keepArea){var i=t.$itemsCnt.data("area");t.$itemsCnt.height(i/t.$itemsCnt.width())}t.reset(),t.isIsotope&&t.$itemsCnt.modulaisotope({packery:{gutter:parseInt(t.options.gutter)}}).modulaisotope("layout")}),100)}},a.prototype.loadImage=function(t){var i=this,e=i.$items.not(".jtg-hidden").eq(t).find(".pic"),o={};if("0"==i.options.lazyLoad){var n=new Image;n.onload=function(){o={width:this.width,height:this.height},e.data("size",o),i.placeImage(t)},"undefined"!=e.attr("src")?n.src=e.attr("src"):n.src=e.data("src")}else i.placeImage(t)},a.prototype.placeImage=function(t){if("grid"!=this.options.type){var i=this.$items.not(".jtg-hidden").eq(t),e=i.find(".pic"),o=i.data("size"),n=e.data("size");if(void 0!==o&&void 0!==n){o.width,o.height;var s=n.width/n.height,a=e.data("valign")?e.data("valign"):"middle",h=e.data("halign")?e.data("halign"):"center",r={top:"auto",bottom:"auto",left:"auto",right:"auto",width:"auto",height:"auto",margin:"0",maxWidth:"999em"};if(o.width*n.height/n.width>o.height)switch(r.width=o.width,r.left=0,a){case"top":r.top=0;break;case"middle":r.top=0-(o.width*(1/s)-o.height)/2;break;case"bottom":r.bottom=0}else switch(r.height=o.height,r.top=0,h){case"left":r.left=0;break;case"center":r.left=0-(o.height*s-o.width)/2;break;case"right":r.right=0}i.hasClass("effect-under")&&(r.top=r.top-i.find(".modula-item-content").height()),e.css(r),this.$items.not(".jtg-hidden").eq(t).addClass("tg-loaded")}}},a.prototype.setupSocial=function(){this.options.enableTwitter&&h(this.$items,this),this.options.enableFacebook&&r(this.$items,this),this.options.enablePinterest&&d(this.$items,this),this.options.enableLinkedin&&u(this.$items,this),this.options.enableWhatsapp&&l(this.$items,this),this.options.enableEmail&&p(this.$items,this)},a.prototype.destroy=function(){this.isPackeryActive&&(this.$itemsCnt.packery("destroy"),this.isPackeryActive=!1)};var h=function(o,n){o.find(".modula-icon-twitter").click((function(o){o.preventDefault();var n=t(this).parents(".modula-item").find("img.pic"),s=n.data("caption"),a=n.data("full"),h=n.attr("title"),r=e.title;return h.length>0?r=t.trim(h):s.length>0&&(r=t.trim(s)),i.open("https://twitter.com/intent/tweet?url="+encodeURI(a)+"&text="+encodeURI(r),"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},r=function(e,o){e.find(".modula-icon-facebook").click((function(e){e.preventDefault();var o="//www.facebook.com/sharer.php?u="+t(this).parents(".modula-item").find("img.pic").attr("data-full");return i.open(o,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},l=function(e,o){e.find(".modula-icon-whatsapp").click((function(e){e.preventDefault();var o=t(this).parents(".modula-item").find("img.pic").attr("data-full");return i.open("https://api.whatsapp.com/send?text="+encodeURI(o)+"&preview_url=true","ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},d=function(o,n){o.find(".modula-icon-pinterest").click((function(o){o.preventDefault();var n=t(this).parents(".modula-item").find("img.pic"),s=n.data("full"),a=n.data("caption"),h=n.attr("title"),r=e.title;h.length>0?r=t.trim(h):a.length>0&&(r=t.trim(a));var l="http://pinterest.com/pin/create/button/?url="+encodeURI(s)+"&description="+encodeURI(r);n.length>=1&&(l+="&media="+function(t){var i=e.createElement("img");return i.src=t,t=i.src,i.src=null,t}(n.attr("data-full")));return i.open(l,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},u=function(e,o){e.find(".modula-icon-linkedin").click((function(e){e.preventDefault();var o=t(this).parents(".modula-item").find("img.pic").attr("data-full"),n="//linkedin.com/shareArticle?mini=true&url="+encodeURI(o);return i.open(n,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))},p=function(t,e){t.find(".modula-icon-email").click((function(t){var o=encodeURI(e.options.email_subject),n=jQuery(".modula-icon-email").parents(".modula-item").find("img.pic").attr("data-full"),s=location.href,a="mailto:?subject="+o+"&body="+encodeURI(e.options.email_message.replace(/%%image_link%%/g,n).replace(/%%gallery_link%%/g,s));return i.open(a,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1}))};t.fn[n]=function(i){var e,s=arguments;return i===o||"object"==typeof i?this.each((function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new a(this,i))})):"string"==typeof i&&"_"!==i[0]&&"init"!==i?(this.each((function(){var o=t.data(this,"plugin_"+n);o instanceof a&&"function"==typeof o[i]&&(e=o[i].apply(o,Array.prototype.slice.call(s,1))),"destroy"===i&&t.data(this,"plugin_"+n,null)})),e!==o?e:this):void 0}}(jQuery,window,document),jQuery(document).ready((function(){var t=jQuery(".modula.modula-gallery");jQuery.each(t,(function(){var t=jQuery(this).data("config");jQuery(this).modulaGallery(t)}))})),jQuery(document).on("elementor/popup/show",((t,i,e)=>{var o=jQuery("#elementor-popup-modal-"+i).find(".modula.modula-gallery");jQuery.each(o,(function(){var t=jQuery(this).data("config");jQuery(this).modulaGallery(t)}))}));