function modula_pro_get_url_parameters(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||!1}!function(a){"use strict";function b(a){this.instance=a,this.filter="*",this.hiddenItems=a.$element.find(".hidden-items .modula-hidden-item"),this.instance.options.haveFilters&&this.initFilters(),"fancybox"==this.instance.options.lightbox&&this.initLightbox()}b.prototype.initLightbox=function(){var a=this,b=a.instance;b.$element.on("click",".modula-item-link:not( .modula-simple-link )",function(c){c.preventDefault();var d=b.$items.filter(a.filter).filter(":not( .modula-simple-link )"),e=jQuery.map(d,function(a){var b=jQuery(a).find(".modula-item-link"),c=jQuery(a).find(".pic");return{src:b.attr("href"),opts:{$thumb:c.parents(".modula-item"),caption:b.data("caption"),alt:c.attr("alt"),thumb:b.attr("data-thumb"),image_id:b.attr("data-image-id")}}});if(a.hiddenItems.length>0){var f=jQuery.map(a.hiddenItems.filter(a.filter),function(a){var b=jQuery(a);return{src:b.attr("href"),opts:{caption:b.data("caption"),alt:"",thumb:b.attr("data-thumb"),image_id:b.attr("data-image-id")}}});e=e.concat(f)}var g=d.index(jQuery(this).parents(".modula-item"));b.options.lightboxOpts.beforeLoad=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_load",[b,this])},b.options.lightboxOpts.afterLoad=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_load",[b,this])},b.options.lightboxOpts.beforeShow=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_show",[b,this])},b.options.lightboxOpts.afterShow=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_show",[b,this])},b.options.lightboxOpts.beforeClose=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_close",[b,this])},b.options.lightboxOpts.afterClose=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_close",[b,this])},b.options.lightboxOpts.onInit=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_init",[b,this])},b.options.lightboxOpts.onActivate=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_activate",[b,this])},b.options.lightboxOpts.onDeactivate=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_deactivate",[b,this])},jQuery.modulaFancybox.open(e,b.options.lightboxOpts,g)})},b.prototype.initFilters=function(){var a=this,b=a.instance;"undefined"!=typeof b.options.defaultActiveFilter&&("All"==b.options.defaultActiveFilter?a.filter="*":a.filter=".jtg-filter-"+b.options.defaultActiveFilter);var c=modula_pro_get_url_parameters("jtg-filter");c&&(a.filter=".jtg-filter-"+c);var d=b.options.dropdownFilters;"1"==d?b.$element.on("change",".filters",function(c){jQuery(this).hasClass("modula_menu__item--current")||(a.filter=".jtg-filter-"+this.value,b.$element.find(".filters .modula_menu__item--current").removeClass("modula_menu__item--current"),b.$element.find(".filters option[value='"+this.value+"']").addClass("modula_menu__item--current").prop("selected","selected"),b.isIsotope?(b.$items.removeClass("jtg-hidden"),b.$items.not(a.filter).addClass("jtg-hidden"),b.reset(),b.$itemsCnt.modulaisotope({filter:a.filter})):b.$itemsCnt.justifiedGallery({filter:a.filter}))}):b.$element.on("click",".filters a",function(c){return"0"!=b.options.filterClick?!0:(c.preventDefault(),void(jQuery(this).parent().hasClass("modula_menu__item--current")||(a.filter=".jtg-filter-"+jQuery(this).data("filter"),b.$element.find(".filters .modula_menu__item--current").removeClass("modula_menu__item--current"),b.$element.find(".filters a[data-filter='"+jQuery(this).attr("data-filter")+"']").parent().addClass("modula_menu__item--current"),b.isIsotope?(b.$items.removeClass("jtg-hidden"),b.$items.not(a.filter).addClass("jtg-hidden"),b.reset(),b.$itemsCnt.modulaisotope({filter:a.filter})):b.$itemsCnt.justifiedGallery({filter:a.filter}))))}),b.$element.find(".filter-by-wrapper").click(function(){var a=jQuery(this);b.$element.find(".filters").hasClass("active")?(b.$element.find(".filters").hide(600).removeClass("active"),a.removeClass("opened")):(b.$element.find(".filters").show(600).addClass("active"),a.addClass("opened"))}),"*"!=a.filter&&""!=a.filter&&(b.isIsotope?(b.$items.removeClass("jtg-hidden"),b.$items.not(a.filter).addClass("jtg-hidden"),b.reset(),b.$itemsCnt.modulaisotope({filter:a.filter})):b.$itemsCnt.justifiedGallery({filter:a.filter}))},a(document).on("modula_api_after_init",function(a,c){new b(c)})}(jQuery);